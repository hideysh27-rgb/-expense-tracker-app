# 支出記録アプリ（Expense Tracker）仕様書

## 1. 概要
本アプリケーションは、ユーザーが日々の支出を記録・管理するためのクライアントサイドWebアプリケーションである。ユーザーは**事前に定義されたカテゴリから選択し**、金額、日付を入力し、一覧で確認することができる。記録されたデータはブラウザの`localStorage`に**オブジェクト配列の形式で**保存され、サーバーサイドの処理を必要としない。

## 2. 目的
- ユーザーが自身の支出を手軽に記録し、可視化できるようにする。
- 自身の消費傾向を把握し、予算管理をサポートする。
- HTML/CSS/JavaScriptの基本的な技術を用いて、シンプルで直感的に使えるUIを提供する。

## 3. 画面構成
画面は単一ページで構成され、主に以下の3つのエリアに分かれる。

1.  **入力エリア**
    - 支出内容を入力するためのフォームを配置する。
    - **カテゴリ**: 事前定義されたカテゴリを選択するプルダウンメニュー
    - **金額**: 数値入力フィールド
    - **日付**: 日付選択フィールド
    - **追加ボタン**: フォームの内容を支出リストに追加するためのボタン

2.  **サマリーエリア**
    - 記録された全支出の合計金額を表示する。
    - **合計支出**: `￥XX,XXX` のように表示する。

3.  **一覧表示エリア**
    - 記録された支出がリスト形式で表示される。
    - 新しい項目が上に追加される（降順）。
    - 各項目には「カテゴリ」「金額」「日付」が表示される。
    - 各項目の横に「削除ボタン」を配置する。

```
+--------------------------------------------------+
|      支出記録アプリ (Expense Tracker)            |
+--------------------------------------------------+
| [入力エリア]                                     |
|                                                  |
| カテゴリ: [プルダウン選択 v] 金額: [ _______ ] 円|
| 日付:   [ YYYY-MM-DD ] [ 追加 ]                    |
|                                                  |
+--------------------------------------------------+
| [サマリーエリア]                                   |
|                                                  |
| 合計支出: ￥XX,XXX                                |
|                                                  |
+--------------------------------------------------+
| [一覧表示エリア]                                   |
|                                                  |
| - 2026-01-28 | 食費 | ￥1,200 | [ 削除 ]         |
| - 2026-01-27 | 交通費 | ￥500 | [ 削除 ]         |
| - 2026-01-26 | 書籍 | ￥2,500 | [ 削除 ]         |
|                                                  |
+--------------------------------------------------+
```

## 4. 入出力仕様

### 入力
- **ユーザー入力**
    - `カテゴリ`: プルダウンから選択された文字列（例: "食費"）
    - `金額`: 正の整数（例: 800）
    - `日付`: `YYYY-MM-DD`形式の文字列
- **ユーザー操作**
    - **追加ボタンのクリック**: 新しい支出データを記録する。
    - **削除ボタンのクリック**: 既存の支出データを削除する。

### 出力
- **画面表示**
    - 入力された支出データが一覧表示エリアにリアルタイムで追加される。
    - 支出の追加・削除に伴い、サマリーエリアの合計金額が再計算され、表示が更新される。
- **データストレージ (`localStorage`)**
    - 支出データは`localStorage`に**オブジェクト配列をJSON形式の文字列として**保存・更新される。

## 5. 機能一覧
- **支出の追加機能**
    - フォームに入力されたカテゴリ（プルダウン選択）、金額、日付を1つのデータとして記録する。
    - 入力値のバリデーションを行う（カテゴリが選択されていること、金額が0より大きい数値であること）。
    - 記録後、入力フォームをクリアする。
- **支出の一覧表示機能**
    - アプリケーション読み込み時に`localStorage`からデータを取得し、一覧表示する。
    - 支出は日付の降順（新しいものが上）でソートして表示する。
- **支出の削除機能**
    - 各支出項目に紐づいた削除ボタンをクリックすると、該当のデータが一覧から削除される。
    - `localStorage`からも該当データが削除される。
- **合計金額の表示機能**
    - `localStorage`に保存されている全支出の合計金額を計算し、画面に表示する。
    - 支出が追加または削除されるたびに、合計金額をリアルタイムで更新する。
- **データ永続化機能**
    - 支出リストへの変更（追加・削除）は、すべて`localStorage`に即時反映される。
    - ブラウザをリロードしても、記録したデータは保持される。
- **カテゴリ管理**
    - アプリケーション内で固定のカテゴリリストを保持する（例: 食費、交通費、娯楽費、住居費など）。

## 6. 使用技術
- **HTML**: アプリケーションの骨格となる構造（フォーム、プルダウンメニュー、リスト、ボタンなど）を定義する。
- **CSS**: アプリケーションの見た目（レイアウト、配色、フォントなど）を定義し、クリーンで分かりやすいUIを作成する。
- **JavaScript (JS)**:
    - ユーザーの操作（ボタンクリック、プルダウン選択など）に応じたDOM操作。
    - フォーム入力値の取得とバリデーション。
    - 支出データの追加、削除、合計金額の計算などのロジック処理。
    - `localStorage`へのデータの読み書き（CRUD操作）。

## 7. データ構造 (`localStorage`利用)
`localStorage`には、キーと値のペアでデータを格納する。キー名は静的な文字列とし、値には**支出オブジェクトの配列**をJSON文字列化したものを格納する。

- **キー**: `"expenses"`
- **値**: 支出オブジェクトの配列を`JSON.stringify()`で文字列化したもの。

### 支出オブジェクトの構造
各支出は、以下のようなプロパティを持つJavaScriptオブジェクトとして表現される。

```json
{
  "id": 1738000000000,  // 削除や更新のためのユニークID（例: Date.now()）
  "category": "食費",       // カテゴリ（文字列、プルダウンから選択）
  "amount": 450,           // 金額（数値）
  "date": "2026-01-28"     // 日付（YYYY-MM-DD形式の文字列）
}
```

### `localStorage`への保存例
`localStorage`に実際に保存されるデータは以下のようになる。

```javascript
// localStorage.setItem('expenses', JSON.stringify(expensesArray));

// 保存される文字列の例（実際には一行で保存される）
'[{"id":1738000000000,"category":"食費","amount":450,"date":"2026-01-28"},{"id":1737900000000,"category":"交通費","amount":500,"date":"2026-01-27"}]'
```